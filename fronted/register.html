<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);

$conn = oci_connect('c##aman', 'root', "//localhost:1521/XE");
if (!$conn) {
    $e = oci_error();
    die("Connection failed: " . htmlentities($e['message']));
}

$message = '';

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $fname    = $_POST['fname'] ?? '';
    $lname    = $_POST['lname'] ?? '';
    $email    = $_POST['email'] ?? '';
    $mobile   = $_POST['mobile'] ?? '';
    $password = $_POST['password'] ?? '';

    $query = "INSERT INTO users (first_name, last_name, email, mobile, password)
              VALUES (:fname, :lname, :email, :mobile, :password)";

    $stmt = oci_parse($conn, $query);
    oci_bind_by_name($stmt, ":fname", $fname);
    oci_bind_by_name($stmt, ":lname", $lname);
    oci_bind_by_name($stmt, ":email", $email);
    oci_bind_by_name($stmt, ":mobile", $mobile);
    oci_bind_by_name($stmt, ":password", $password); // ðŸ” You can later hash it 
}
?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Register</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<body class="bg-gray-100 flex justify-center items-center min-h-screen">

<div class="bg-white w-full max-w-md p-8 rounded-lg shadow-md">
    <div class="text-center mb-6">
        <h2 class="text-xl font-semibold">Create an Account</h2>
    </div>
    <?php if (!empty($message)): ?>
      <p class="text-center text-red-600 mb-4"><?= $message ?></p>
    <?php endif; ?>
    <form method="POST" action="">
        <div class="mb-4">
            <label for="fname" class="block text-sm font-medium text-gray-700">First Name</label>
            <input type="text" name="fname" id="fname" required placeholder="Enter first name" 
                class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"/>
        </div>
        <div class="mb-4">
            <label for="lname" class="block text-sm font-medium text-gray-700">Last Name</label>
            <input type="text" name="lname" id="lname" required placeholder="Enter last name" 
                class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"/>
        </div>
        <div class="mb-4">
            <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
            <input type="email" name="email" id="email" required placeholder="Enter email" 
                class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"/>
        </div>
        <div class="mb-4">
            <label for="mobile" class="block text-sm font-medium text-gray-700">Mobile</label>
            <input type="tel" name="mobile" id="mobile" required placeholder="Enter mobile number" 
                class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"/>
        </div>
        <div class="mb-6">
            <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
            <input type="password" name="password" id="password" required placeholder="Enter password" 
                class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"/>
        </div>
        <div class="mb-4">
            <button type="submit" 
                class="w-full bg-blue-600 text-white hover:bg-blue-700 px-4 py-2 rounded-md font-medium">
                Register
            </button>
        </div>
        <p class="text-center text-sm text-gray-700">
            Already have an account? 
            <a href="login.html" class="text-blue-600 hover:underline">Login</a>
        </p>
    </form>
</div>

</body>
</html>